@using Microsoft.CodeAnalysis.Host
@model IEnumerable<RateDto>

@{
    ViewData["Title"] = "View";
}

<h2>Currency Rates</h2>

<table>
    <thead>
        <tr>
            <th>
                <h4>Currency</h4>
            </th>
            <th>
                <h4>-------</h4>
            </th>
            <th>
                <h4>Value</h4>
            </th>
        </tr>
    </thead>
    <tbody id="table">
        @foreach (var item in Model)
        {
        <tr>
            <td>
                @Html.DisplayFor(valueItem => item.Name)
            </td>
            <td>
            </td>
            <td>
                @Html.DisplayFor(valueItem => item.Value)
            </td>
        </tr>
        }
    </tbody>
</table>

<button id="next" , value="add" class="btn btn-primary btn-sm">>>></button>

<script src="~/js/jquery-3.3.1.min.js"></script>
<script type="text/javascript">
    var page = 1;
    $("#next").on('click',
        function() {
            $.ajax({
                type: 'GET',
                url: '/currency/getjsonrates/',
                data: { "page": page },
                dataType: 'json',
                success: function(data) {
                    if (data != null) {
                        for (var i = 0; i < data.length; i++) {
                            var tr = (
                                `<tr><td>${data[i].name}</td><td>
                                    </td><td>${data[i].value}</td></tr>`
                            );
                            $("tr:odd").css("background-color", "#F0F8FF");
                            $("#table").append(tr);
                            
                        }
                        page++;
                    }
                },
                beforeSend: function() {
                    $("#progress").show();
                },
                complete: function() {
                    $("#progress").hide();
                },
                error: function() {
                    alert("Error while retrieving data!");
                }
            });
        });
</script>





